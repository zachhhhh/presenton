(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{35511:function(e,t,a){Promise.resolve().then(a.bind(a,87462)),Promise.resolve().then(a.t.bind(a,47960,23)),Promise.resolve().then(a.bind(a,10527)),Promise.resolve().then(a.bind(a,49294)),Promise.resolve().then(a.bind(a,33606)),Promise.resolve().then(a.bind(a,46281)),Promise.resolve().then(a.t.bind(a,38103,23)),Promise.resolve().then(a.t.bind(a,9675,23)),Promise.resolve().then(a.t.bind(a,57333,23))},10527:function(e,t,a){"use strict";var n=a(57437),o=a(2265),r=a(56295),i=a(99376);t.default=function(e){let{children:t}=e,a=(0,i.usePathname)();return(0,o.useEffect)(()=>{(0,r.BP)()},[]),(0,o.useEffect)(()=>{(0,r.L9)(r.j7.PageView,{url:a})},[a]),(0,n.jsx)(n.Fragment,{children:t})}},49294:function(e,t,a){"use strict";a.d(t,{Providers:function(){return i}});var n=a(57437),o=a(68575),r=a(82314);function i(e){let{children:t}=e;return(0,n.jsx)(o.zt,{store:r.h,children:t})}},33606:function(e,t,a){"use strict";a.d(t,{Toaster:function(){return s}});var n=a(57437),o=a(29),r=a.n(o),i=a(25922),l=a(14438);let s=e=>{let{...t}=e,{theme:a="system"}=(0,i.F)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r(),{id:"5047d2adcc9bc80c",children:'[data-sonner-toast]{-webkit-border-radius:12px!important;-moz-border-radius:12px!important;border-radius:12px!important;-webkit-box-shadow:0 10px 25px -5px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05)!important;-moz-box-shadow:0 10px 25px -5px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05)!important;box-shadow:0 10px 25px -5px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05)!important;-webkit-backdrop-filter:blur(8px)!important;backdrop-filter:blur(8px)!important}[data-sonner-toast][data-type="success"]{background:rgb(248 250 252)!important;border:1px solid rgb(28,138,68)!important;border-left:4px solid rgb(28,138,68)!important}[data-sonner-toast][data-type="success"] [data-title]{color:rgb(15 23 42)!important;font-weight:500!important}[data-sonner-toast][data-type="success"] [data-description]{color:rgb(71 85 105)!important}[data-sonner-toast][data-type="error"]{background:rgb(248 250 252)!important;border:1px solid rgb(186,48,48)!important;border-left:4px solid rgb(186,48,48)!important}[data-sonner-toast][data-type="error"] [data-title]{color:rgb(15 23 42)!important;font-weight:500!important}[data-sonner-toast][data-type="error"] [data-description]{color:rgb(71 85 105)!important}[data-sonner-toast][data-type="info"]{background:rgb(248 250 252)!important;border:1px solid rgb(59 130 246)!important;border-left:4px solid rgb(59 130 246)!important}[data-sonner-toast][data-type="info"] [data-title]{color:rgb(15 23 42)!important;font-weight:500!important}[data-sonner-toast][data-type="info"] [data-description]{color:rgb(71 85 105)!important}[data-sonner-toast][data-type="warning"]{background:rgb(248 250 252)!important;border:1px solid rgb(245 158 11)!important;border-left:4px solid rgb(245 158 11)!important}[data-sonner-toast][data-type="warning"] [data-title]{color:rgb(15 23 42)!important;font-weight:500!important}[data-sonner-toast][data-type="warning"] [data-description]{color:rgb(71 85 105)!important}[data-sonner-toast][data-type="loading"]{background:rgb(248 250 252)!important;border:1px solid rgb(139 92 246)!important;border-left:4px solid rgb(139 92 246)!important}[data-sonner-toast][data-type="loading"] [data-title]{color:rgb(15 23 42)!important;font-weight:500!important}[data-sonner-toast][data-type="loading"] [data-description]{color:rgb(71 85 105)!important}.dark [data-sonner-toast][data-type="success"]{background:rgb(15 23 42)!important;border:1px solid rgb(34 197 94)!important;border-left:4px solid rgb(34 197 94)!important}.dark [data-sonner-toast][data-type="success"] [data-title]{color:rgb(248 250 252)!important}.dark [data-sonner-toast][data-type="success"] [data-description]{color:rgb(148 163 184)!important}.dark [data-sonner-toast][data-type="error"]{background:rgb(15 23 42)!important;border:1px solid rgb(239 68 68)!important;border-left:4px solid rgb(239 68 68)!important}.dark [data-sonner-toast][data-type="error"] [data-title]{color:rgb(248 250 252)!important}.dark [data-sonner-toast][data-type="error"] [data-description]{color:rgb(148 163 184)!important}.dark [data-sonner-toast][data-type="info"]{background:rgb(15 23 42)!important;border:1px solid rgb(59 130 246)!important;border-left:4px solid rgb(59 130 246)!important}.dark [data-sonner-toast][data-type="info"] [data-title]{color:rgb(248 250 252)!important}.dark [data-sonner-toast][data-type="info"] [data-description]{color:rgb(148 163 184)!important}.dark [data-sonner-toast][data-type="warning"]{background:rgb(15 23 42)!important;border:1px solid rgb(245 158 11)!important;border-left:4px solid rgb(245 158 11)!important}.dark [data-sonner-toast][data-type="warning"] [data-title]{color:rgb(248 250 252)!important}.dark [data-sonner-toast][data-type="warning"] [data-description]{color:rgb(148 163 184)!important}.dark [data-sonner-toast][data-type="loading"]{background:rgb(15 23 42)!important;border:1px solid rgb(139 92 246)!important;border-left:4px solid rgb(139 92 246)!important}.dark [data-sonner-toast][data-type="loading"] [data-title]{color:rgb(248 250 252)!important}.dark [data-sonner-toast][data-type="loading"] [data-description]{color:rgb(148 163 184)!important}'}),(0,n.jsx)(l.x7,{theme:a,className:"toaster group",toastOptions:{classNames:{toast:"group toast",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-slate-900 group-[.toast]:text-white hover:group-[.toast]:bg-slate-800 group-[.toast]:rounded-lg group-[.toast]:px-3 group-[.toast]:py-1.5",cancelButton:"group-[.toast]:bg-slate-200 group-[.toast]:text-slate-700 hover:group-[.toast]:bg-slate-300 group-[.toast]:rounded-lg group-[.toast]:px-3 group-[.toast]:py-1.5"}},...t})]})}},46281:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return u},a:function(){return c}});var n=a(57437),o=a(2265),r=a(71545),i=a(25566);let l=i.env.NEXT_PUBLIC_SUPABASE_URL||"https://placeholder.supabase.co",s=i.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"placeholder-anon-key",d=(0,r.eI)(l,s),p=(0,o.createContext)(void 0);function u(e){let{children:t}=e,[a,r]=(0,o.useState)(null),[i,l]=(0,o.useState)({presentations_generated:0,presentations_exported:0,api_calls_made:0,images_generated:0,documents_processed:0}),[s,u]=(0,o.useState)({max_presentations_per_month:3,max_exports_per_month:3,max_api_calls_per_month:50,max_images_per_month:5,max_documents_per_month:2,can_use_custom_templates:!1,can_use_premium_templates:!1,can_export_pdf:!0,can_export_pptx:!0,max_file_upload_size_mb:10}),[c,_]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await d.auth.getSession();e&&await m(e.access_token)}catch(e){console.error("Auth initialization error:",e)}finally{_(!1)}})();let{data:{subscription:e}}=d.auth.onAuthStateChange(async(e,t)=>{t?await m(t.access_token):(r(null),l({presentations_generated:0,presentations_exported:0,api_calls_made:0,images_generated:0,documents_processed:0}))});return()=>{e.unsubscribe()}},[]);let m=async e=>{try{localStorage.setItem("auth_token",e);let t=await fetch("/api/v1/user/me",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();r(e.user),l(e.usage),u(e.limits)}}catch(e){console.error("Failed to fetch user data:",e)}},g=async(e,t)=>{let{data:a,error:n}=await d.auth.signInWithPassword({email:e,password:t});if(n)throw n;a.session&&await m(a.session.access_token)},f=async(e,t,a)=>{let{data:n,error:o}=await d.auth.signUp({email:e,password:t,options:{data:{full_name:a}}});if(o)throw o;n.session&&await m(n.session.access_token)},P=async()=>{let{error:e}=await d.auth.signOut();if(e)throw e;localStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_token"),r(null),l({presentations_generated:0,presentations_exported:0,api_calls_made:0,images_generated:0,documents_processed:0})},b=async()=>{let{data:{session:e}}=await d.auth.getSession();e&&await m(e.access_token)},y=async()=>{var e;let{data:t}=await d.auth.getSession();return(null===(e=t.session)||void 0===e?void 0:e.access_token)||null},C=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=await y();if(!a)return!1;try{let n=await fetch("/api/v1/user/usage/check/".concat(e,"?amount=").concat(t),{headers:{Authorization:"Bearer ".concat(a)}});if(n.ok)return(await n.json()).allowed;return!1}catch(e){return console.error("Failed to check usage limit:",e),!1}};return(0,n.jsx)(p.Provider,{value:{user:a,usage:i,limits:s,loading:c,signIn:g,signUp:f,signOut:P,refreshUser:b,getAuthToken:y,checkUsageLimit:C},children:t})}function c(){let e=(0,o.useContext)(p);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},44763:function(e,t,a){"use strict";a.d(t,{g9:function(){return o}});let n=(0,a(1455).oM)({name:"pptGenUpload",initialState:{config:null,files:[]},reducers:{setPptGenUploadState:(e,t)=>{let a=t.payload;e.config=a.config,e.files=a.files}}}),{setPptGenUploadState:o}=n.actions;t.ZP=n.reducer},91626:function(e,t,a){"use strict";a.d(t,{BJ:function(){return o},F5:function(){return _},Fh:function(){return c},Gq:function(){return C},JW:function(){return u},Q8:function(){return m},TZ:function(){return l},Wv:function(){return p},c1:function(){return x},hE:function(){return y},hT:function(){return b},jl:function(){return f},lO:function(){return h},nb:function(){return i},tP:function(){return P}});let n=(0,a(1455).oM)({name:"presentationGeneration",initialState:{presentation_id:null,outlines:[],isSlidesRendered:!1,isLayoutLoading:!1,isLoading:!1,isStreaming:null,error:null,presentationData:null},reducers:{setStreaming:(e,t)=>{e.isStreaming=t.payload},setLoading:(e,t)=>{e.isLoading=t.payload},setLayoutLoading:(e,t)=>{e.isLayoutLoading=t.payload},setPresentationId:(e,t)=>{e.presentation_id=t.payload,e.error=null},setSlidesRendered:(e,t)=>{e.isSlidesRendered=t.payload},setError:(e,t)=>{e.error=t.payload,e.isLoading=!1},clearPresentationData:e=>{e.presentationData=null},clearOutlines:e=>{e.outlines=[]},setOutlines:(e,t)=>{e.outlines=t.payload},setPresentationData:(e,t)=>{e.presentationData=t.payload},deleteSlideOutline:(e,t)=>{e.outlines&&(e.outlines=e.outlines.filter((e,a)=>a!==t.payload.index))},addSlide:(e,t)=>{var a;(null===(a=e.presentationData)||void 0===a?void 0:a.slides)&&(e.presentationData.slides.splice(t.payload.index,0,t.payload.slide),e.presentationData.slides=e.presentationData.slides.map((e,t)=>({...e,index:t})))},deletePresentationSlide:(e,t)=>{e.presentationData&&(e.presentationData.slides.splice(t.payload,1),e.presentationData.slides=e.presentationData.slides.map((e,t)=>({...e,index:t})))},updateSlide:(e,t)=>{e.presentationData&&e.presentationData.slides[t.payload.index]&&(e.presentationData.slides[t.payload.index]=t.payload.slide)},updateSlideContent:(e,t)=>{if(e.presentationData&&e.presentationData.slides&&e.presentationData.slides[t.payload.slideIndex]){let a=e.presentationData.slides[t.payload.slideIndex],{dataPath:n,content:o}=t.payload;n&&a.content&&((e,t,a)=>{let n=t.split(/[.\[\]]+/).filter(Boolean),o=e;for(let e=0;e<n.length-1;e++){let t=n[e];if(isNaN(Number(t)))o[t]||(o[t]={}),o=o[t];else{let e=Number(t);o[e]||(o[e]={}),o=o[e]}}let r=n[n.length-1];isNaN(Number(r))?o[r]=a:o[Number(r)]=a})(a.content,n,o)}},addNewSlide:(e,t)=>{var a;(null===(a=e.presentationData)||void 0===a?void 0:a.slides)&&(e.presentationData.slides.splice(t.payload.index+1,0,t.payload.slideData),e.presentationData.slides=e.presentationData.slides.map((e,t)=>({...e,index:t})))},updateSlideImage:(e,t)=>{if(e.presentationData&&e.presentationData.slides&&e.presentationData.slides[t.payload.slideIndex]){let n=e.presentationData.slides[t.payload.slideIndex],{dataPath:o,imageUrl:r,prompt:i}=t.payload;if(o&&n.content&&((e,t,a,n)=>{let o=t.split(/[.\[\]]+/).filter(Boolean),r=e;for(let e=0;e<o.length-1;e++){let t=o[e];if(isNaN(Number(t)))r[t]||(r[t]={}),r=r[t];else{let e=Number(t);r[e]||(r[e]={}),r=r[e]}}let i=o[o.length-1],l=isNaN(Number(i))?r[i]:r[Number(i)],s={...l&&"object"==typeof l?l:{},__image_url__:a,__image_prompt__:n||(null==l?void 0:l.__image_prompt__)||""};isNaN(Number(i))?r[i]=s:r[Number(i)]=s})(n.content,o,r,i),n.images&&Array.isArray(n.images)){var a;let e=parseInt(null===(a=o.split("[")[1])||void 0===a?void 0:a.split("]")[0])||0;void 0!==n.images[e]&&(n.images[e]=r)}}},updateImageProperties:(e,t)=>{if(e.presentationData&&e.presentationData.slides&&e.presentationData.slides[t.payload.slideIndex]){let a=e.presentationData.slides[t.payload.slideIndex],{itemIndex:n,properties:o}=t.payload;a.properties={...a.properties,[n]:o}}},updateSlideIcon:(e,t)=>{if(e.presentationData&&e.presentationData.slides&&e.presentationData.slides[t.payload.slideIndex]){let n=e.presentationData.slides[t.payload.slideIndex],{dataPath:o,iconUrl:r,query:i}=t.payload;if(o&&n.content&&((e,t,a,n)=>{let o=t.split(/[.\[\]]+/).filter(Boolean),r=e;for(let e=0;e<o.length-1;e++){let t=o[e];if(isNaN(Number(t)))r[t]||(r[t]={}),r=r[t];else{let e=Number(t);r[e]||(r[e]={}),r=r[e]}}let i=o[o.length-1],l=isNaN(Number(i))?r[i]:r[Number(i)],s={...l&&"object"==typeof l?l:{},__icon_url__:a,__icon_query__:n||(null==l?void 0:l.__icon_query__)||""};isNaN(Number(i))?r[i]=s:r[Number(i)]=s,console.log("Redux: Updated slide icon at path:",t,"with URL:",a)})(n.content,o,r,i),n.icons&&Array.isArray(n.icons)){var a;let e=parseInt(null===(a=o.split("[")[1])||void 0===a?void 0:a.split("]")[0])||0;void 0!==n.icons[e]&&(n.icons[e]=r)}}}}}),{setStreaming:o,setLoading:r,setLayoutLoading:i,setPresentationId:l,setSlidesRendered:s,setError:d,clearPresentationData:p,clearOutlines:u,deleteSlideOutline:c,setPresentationData:_,setOutlines:m,addSlide:g,updateSlide:f,deletePresentationSlide:P,updateSlideContent:b,updateSlideImage:y,updateImageProperties:C,updateSlideIcon:x,addNewSlide:h}=n.actions;t.ZP=n.reducer},99150:function(e,t,a){"use strict";a.d(t,{$t:function(){return d},G9:function(){return i},KX:function(){return s},QQ:function(){return p},Yw:function(){return l}});var n=a(1455);let o=e=>JSON.parse(JSON.stringify(e)),r=(0,n.oM)({name:"undoRedo",initialState:{past:[],present:null,future:[],maxHistorySize:30,isUndoRedoInProgress:!1},reducers:{addToHistory:(e,t)=>{if(e.isUndoRedoInProgress)return;let a=o(t.payload.slides);if(!e.present){e.present={slides:a,timestamp:Date.now(),actionType:t.payload.actionType};return}JSON.stringify(e.present.slides)!==JSON.stringify(a)&&(e.past.push(e.present),e.past.length>e.maxHistorySize&&e.past.shift(),e.future=[],e.present={slides:a,timestamp:Date.now(),actionType:t.payload.actionType})},undo:e=>{if(0===e.past.length)return;e.isUndoRedoInProgress=!0,e.present&&e.future.unshift(o(e.present));let t=e.past[e.past.length-1];e.past=e.past.slice(0,-1),e.present=o(t)},redo:e=>{if(0===e.future.length)return;e.isUndoRedoInProgress=!0,e.present&&e.past.push(o(e.present));let t=e.future[0];e.future=e.future.slice(1),e.present=o(t)},finishUndoRedo:e=>{e.isUndoRedoInProgress=!1},clearHistory:e=>{e.past=[],e.future=[],e.present=null}}}),{addToHistory:i,undo:l,redo:s,finishUndoRedo:d,clearHistory:p}=r.actions;t.ZP=r.reducer},62025:function(e,t,a){"use strict";a.d(t,{KY:function(){return r},Re:function(){return o}});let n=(0,a(1455).oM)({name:"userConfig",initialState:{llm_config:{},can_change_keys:!1},reducers:{setLLMConfig:(e,t)=>{e.llm_config=t.payload},setCanChangeKeys:(e,t)=>{e.can_change_keys=t.payload}}}),{setLLMConfig:o,setCanChangeKeys:r}=n.actions;t.ZP=n.reducer},82314:function(e,t,a){"use strict";a.d(t,{h:function(){return s}});var n=a(1455),o=a(91626),r=a(44763),i=a(62025),l=a(99150);let s=(0,n.xC)({reducer:{presentationGeneration:o.ZP,pptGenUpload:r.ZP,userConfig:i.ZP,undoRedo:l.ZP}})},56295:function(e,t,a){"use strict";a.d(t,{BP:function(){return d},L9:function(){return p},j7:function(){return o}});var n,o,r=a(34904);let i="d726e8bea8ec147f4c7720060cb2e6d1";(n=o||(o={})).PageView="Page View",n.Navigation="Navigation",n.Home_SaveConfiguration_Button_Clicked="Home Save Configuration Button Clicked",n.Home_SaveConfiguration_API_Call="Home Save Configuration API Call",n.Home_CheckOllamaModelPulled_API_Call="Home Check Ollama Model Pulled API Call",n.Home_DownloadOllamaModel_API_Call="Home Download Ollama Model API Call",n.Outline_Generate_Presentation_Button_Clicked="Outline Generate Presentation Button Clicked",n.Outline_Select_Template_Button_Clicked="Outline Select Template Button Clicked",n.Outline_Add_Slide_Button_Clicked="Outline Add Slide Button Clicked",n.Presentation_Prepare_API_Call="Presentation Prepare API Call",n.Presentation_Stream_API_Call="Presentation Stream API Call",n.Group_Layout_Selected_Clicked="Group Layout Selected Clicked",n.Header_Export_PDF_Button_Clicked="Header Export PDF Button Clicked",n.Header_Export_PPTX_Button_Clicked="Header Export PPTX Button Clicked",n.Header_UpdatePresentationContent_API_Call="Header Update Presentation Content API Call",n.Header_ExportAsPDF_API_Call="Header Export As PDF API Call",n.Header_GetPptxModel_API_Call="Header Get PPTX Model API Call",n.Header_ExportAsPPTX_API_Call="Header Export As PPTX API Call",n.Slide_Add_New_Slide_Button_Clicked="Slide Add New Slide Button Clicked",n.Slide_Delete_Slide_Button_Clicked="Slide Delete Slide Button Clicked",n.Slide_Update_From_Prompt_Button_Clicked="Slide Update From Prompt Button Clicked",n.Slide_Edit_API_Call="Slide Edit API Call",n.Slide_Delete_API_Call="Slide Delete API Call",n.TemplatePreview_Back_Button_Clicked="Template Preview Back Button Clicked",n.TemplatePreview_All_Groups_Button_Clicked="Template Preview All Groups Button Clicked",n.TemplatePreview_Delete_Templates_Button_Clicked="Template Preview Delete Templates Button Clicked",n.TemplatePreview_Delete_Templates_API_Call="Template Preview Delete Templates API Call",n.TemplatePreview_Open_Editor_Button_Clicked="Template Preview Open Editor Button Clicked",n.CustomTemplate_Save_Templates_API_Call="Custom Template Save Templates API Call",n.PdfMaker_Retry_Button_Clicked="PDF Maker Retry Button Clicked",n.Upload_Upload_Documents_API_Call="Upload Upload Documents API Call",n.Upload_Decompose_Documents_API_Call="Upload Decompose Documents API Call",n.Upload_Create_Presentation_API_Call="Upload Create Presentation API Call",n.DocumentsPreview_Create_Presentation_API_Call="Documents Preview Create Presentation API Call",n.DocumentsPreview_Next_Button_Clicked="Documents Preview Next Button Clicked",n.Settings_SaveConfiguration_Button_Clicked="Settings Save Configuration Button Clicked",n.Settings_SaveConfiguration_API_Call="Settings Save Configuration API Call",n.Settings_CheckOllamaModelPulled_API_Call="Settings Check Ollama Model Pulled API Call",n.Settings_DownloadOllamaModel_API_Call="Settings Download Ollama Model API Call",n.PresentationPage_Refresh_Page_Button_Clicked="Presentation Page Refresh Page Button Clicked",n.PresentationMode_Fullscreen_Toggle_Clicked="Presentation Mode Fullscreen Toggle Clicked",n.PresentationMode_Exit_Clicked="Presentation Mode Exit Clicked",n.ImageEditor_GetPreviousGeneratedImages_API_Call="Image Editor Get Previous Generated Images API Call",n.ImageEditor_GenerateImage_API_Call="Image Editor Generate Image API Call",n.ImageEditor_UploadImage_API_Call="Image Editor Upload Image API Call",n.Header_ReGenerate_Button_Clicked="Header ReGenerate Button Clicked";let l=null;async function s(){return"boolean"==typeof window.__mixpanel_telemetry_enabled?window.__mixpanel_telemetry_enabled:(l||(l=fetch("/api/telemetry-status").then(async e=>{try{let t=await e.json(),a=!!(null==t?void 0:t.telemetryEnabled);return window.__mixpanel_telemetry_enabled=a,a}catch(e){return window.__mixpanel_telemetry_enabled=!0,!0}}).catch(()=>(window.__mixpanel_telemetry_enabled=!0,!0))),l)}function d(){i&&(window.__mixpanel_initialized||s().then(e=>{e&&(window.__mixpanel_initialized||(r.Z.init(i,{track_pageview:!1}),r.Z.identify(r.Z.get_distinct_id()),window.__mixpanel_initialized=!0))}))}function p(e,t){!function(e,t){if(i&&!1!==window.__mixpanel_telemetry_enabled){if(!window.__mixpanel_initialized){d();return}r.Z.track(e,t)}}(e,t)}},47960:function(){}},function(e){e.O(0,[3587,5358,1601,4337,3889,9908,1455,4438,3142,1545,8246,7462,2971,2117,1744],function(){return e(e.s=35511)}),_N_E=e.O()}]);