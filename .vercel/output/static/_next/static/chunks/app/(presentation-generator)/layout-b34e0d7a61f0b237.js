(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8264],{58917:function(e,t,n){Promise.resolve().then(n.bind(n,61591))},61591:function(e,t,n){"use strict";n.d(t,{ConfigurationInitializer:function(){return u}});var a=n(57437),i=n(2265),l=n(62025),s=n(93732),r=n(99376),o=n(68575),d=n(18351);function u(e){let{children:t}=e,n=(0,o.I0)(),[u,p]=(0,i.useState)(!0),c=(0,r.useRouter)(),_=(0,r.usePathname)();(0,i.useEffect)(()=>{m()},[]);let f=e=>{let t=setInterval(()=>{window.location.pathname===e&&(clearInterval(t),p(!1))},500)},m=async()=>{p(!0);let e=await fetch("/api/can-change-keys"),t=(await e.json()).canChange;if(n((0,l.KY)(t)),t){let e=await fetch("/api/user-config"),t=await e.json();if(t.LLM||(t.LLM="openai"),n((0,l.Re)(t)),(0,s.L)(t)){if("ollama"===t.LLM&&!await (0,d.Zk)(t.OLLAMA_MODEL)||"custom"===t.LLM&&!await L(t)){c.push("/"),f("/");return}"/"===_?(c.push("/upload"),f("/upload")):p(!1)}else"/"!==_?(c.push("/"),f("/")):p(!1)}else"/"===_?(c.push("/upload"),f("/upload")):p(!1)},L=async e=>{try{let t=await fetch("/api/v1/ppt/openai/models/available",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e.CUSTOM_LLM_URL,api_key:e.CUSTOM_LLM_API_KEY})});return(await t.json()).includes(e.CUSTOM_MODEL)}catch(e){return console.error("Error fetching custom models:",e),!1}};return u?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#E9E8F8] via-[#F5F4FF] to-[#E0DFF7] flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"max-w-md w-full",children:(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8 text-center",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("img",{src:"/Logo.png",alt:"PresentOn",className:"h-12 mx-auto mb-4 opacity-90"}),(0,a.jsx)("div",{className:"w-16 h-1 bg-gradient-to-r from-blue-500 to-purple-600 mx-auto rounded-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 font-inter",children:"Initializing Application"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 font-inter",children:"Loading configuration and checking model availability..."})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("div",{className:"flex space-x-1 justify-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})})]})})}):t}},44763:function(e,t,n){"use strict";n.d(t,{g9:function(){return i}});let a=(0,n(1455).oM)({name:"pptGenUpload",initialState:{config:null,files:[]},reducers:{setPptGenUploadState:(e,t)=>{let n=t.payload;e.config=n.config,e.files=n.files}}}),{setPptGenUploadState:i}=a.actions;t.ZP=a.reducer},91626:function(e,t,n){"use strict";n.d(t,{BJ:function(){return i},F5:function(){return _},Fh:function(){return c},Gq:function(){return y},JW:function(){return p},Q8:function(){return f},TZ:function(){return r},Wv:function(){return u},c1:function(){return I},hE:function(){return g},hT:function(){return E},jl:function(){return L},lO:function(){return h},nb:function(){return s},tP:function(){return O}});let a=(0,n(1455).oM)({name:"presentationGeneration",initialState:{presentation_id:null,outlines:[],isSlidesRendered:!1,isLayoutLoading:!1,isLoading:!1,isStreaming:null,error:null,presentationData:null},reducers:{setStreaming:(e,t)=>{e.isStreaming=t.payload},setLoading:(e,t)=>{e.isLoading=t.payload},setLayoutLoading:(e,t)=>{e.isLayoutLoading=t.payload},setPresentationId:(e,t)=>{e.presentation_id=t.payload,e.error=null},setSlidesRendered:(e,t)=>{e.isSlidesRendered=t.payload},setError:(e,t)=>{e.error=t.payload,e.isLoading=!1},clearPresentationData:e=>{e.presentationData=null},clearOutlines:e=>{e.outlines=[]},setOutlines:(e,t)=>{e.outlines=t.payload},setPresentationData:(e,t)=>{e.presentationData=t.payload},deleteSlideOutline:(e,t)=>{e.outlines&&(e.outlines=e.outlines.filter((e,n)=>n!==t.payload.index))},addSlide:(e,t)=>{var n;(null===(n=e.presentationData)||void 0===n?void 0:n.slides)&&(e.presentationData.slides.splice(t.payload.index,0,t.payload.slide),e.presentationData.slides=e.presentationData.slides.map((e,t)=>({...e,index:t})))},deletePresentationSlide:(e,t)=>{e.presentationData&&(e.presentationData.slides.splice(t.payload,1),e.presentationData.slides=e.presentationData.slides.map((e,t)=>({...e,index:t})))},updateSlide:(e,t)=>{e.presentationData&&e.presentationData.slides[t.payload.index]&&(e.presentationData.slides[t.payload.index]=t.payload.slide)},updateSlideContent:(e,t)=>{if(e.presentationData&&e.presentationData.slides&&e.presentationData.slides[t.payload.slideIndex]){let n=e.presentationData.slides[t.payload.slideIndex],{dataPath:a,content:i}=t.payload;a&&n.content&&((e,t,n)=>{let a=t.split(/[.\[\]]+/).filter(Boolean),i=e;for(let e=0;e<a.length-1;e++){let t=a[e];if(isNaN(Number(t)))i[t]||(i[t]={}),i=i[t];else{let e=Number(t);i[e]||(i[e]={}),i=i[e]}}let l=a[a.length-1];isNaN(Number(l))?i[l]=n:i[Number(l)]=n})(n.content,a,i)}},addNewSlide:(e,t)=>{var n;(null===(n=e.presentationData)||void 0===n?void 0:n.slides)&&(e.presentationData.slides.splice(t.payload.index+1,0,t.payload.slideData),e.presentationData.slides=e.presentationData.slides.map((e,t)=>({...e,index:t})))},updateSlideImage:(e,t)=>{if(e.presentationData&&e.presentationData.slides&&e.presentationData.slides[t.payload.slideIndex]){let a=e.presentationData.slides[t.payload.slideIndex],{dataPath:i,imageUrl:l,prompt:s}=t.payload;if(i&&a.content&&((e,t,n,a)=>{let i=t.split(/[.\[\]]+/).filter(Boolean),l=e;for(let e=0;e<i.length-1;e++){let t=i[e];if(isNaN(Number(t)))l[t]||(l[t]={}),l=l[t];else{let e=Number(t);l[e]||(l[e]={}),l=l[e]}}let s=i[i.length-1],r=isNaN(Number(s))?l[s]:l[Number(s)],o={...r&&"object"==typeof r?r:{},__image_url__:n,__image_prompt__:a||(null==r?void 0:r.__image_prompt__)||""};isNaN(Number(s))?l[s]=o:l[Number(s)]=o})(a.content,i,l,s),a.images&&Array.isArray(a.images)){var n;let e=parseInt(null===(n=i.split("[")[1])||void 0===n?void 0:n.split("]")[0])||0;void 0!==a.images[e]&&(a.images[e]=l)}}},updateImageProperties:(e,t)=>{if(e.presentationData&&e.presentationData.slides&&e.presentationData.slides[t.payload.slideIndex]){let n=e.presentationData.slides[t.payload.slideIndex],{itemIndex:a,properties:i}=t.payload;n.properties={...n.properties,[a]:i}}},updateSlideIcon:(e,t)=>{if(e.presentationData&&e.presentationData.slides&&e.presentationData.slides[t.payload.slideIndex]){let a=e.presentationData.slides[t.payload.slideIndex],{dataPath:i,iconUrl:l,query:s}=t.payload;if(i&&a.content&&((e,t,n,a)=>{let i=t.split(/[.\[\]]+/).filter(Boolean),l=e;for(let e=0;e<i.length-1;e++){let t=i[e];if(isNaN(Number(t)))l[t]||(l[t]={}),l=l[t];else{let e=Number(t);l[e]||(l[e]={}),l=l[e]}}let s=i[i.length-1],r=isNaN(Number(s))?l[s]:l[Number(s)],o={...r&&"object"==typeof r?r:{},__icon_url__:n,__icon_query__:a||(null==r?void 0:r.__icon_query__)||""};isNaN(Number(s))?l[s]=o:l[Number(s)]=o,console.log("Redux: Updated slide icon at path:",t,"with URL:",n)})(a.content,i,l,s),a.icons&&Array.isArray(a.icons)){var n;let e=parseInt(null===(n=i.split("[")[1])||void 0===n?void 0:n.split("]")[0])||0;void 0!==a.icons[e]&&(a.icons[e]=l)}}}}}),{setStreaming:i,setLoading:l,setLayoutLoading:s,setPresentationId:r,setSlidesRendered:o,setError:d,clearPresentationData:u,clearOutlines:p,deleteSlideOutline:c,setPresentationData:_,setOutlines:f,addSlide:m,updateSlide:L,deletePresentationSlide:O,updateSlideContent:E,updateSlideImage:g,updateImageProperties:y,updateSlideIcon:I,addNewSlide:h}=a.actions;t.ZP=a.reducer},99150:function(e,t,n){"use strict";n.d(t,{$t:function(){return d},G9:function(){return s},KX:function(){return o},QQ:function(){return u},Yw:function(){return r}});var a=n(1455);let i=e=>JSON.parse(JSON.stringify(e)),l=(0,a.oM)({name:"undoRedo",initialState:{past:[],present:null,future:[],maxHistorySize:30,isUndoRedoInProgress:!1},reducers:{addToHistory:(e,t)=>{if(e.isUndoRedoInProgress)return;let n=i(t.payload.slides);if(!e.present){e.present={slides:n,timestamp:Date.now(),actionType:t.payload.actionType};return}JSON.stringify(e.present.slides)!==JSON.stringify(n)&&(e.past.push(e.present),e.past.length>e.maxHistorySize&&e.past.shift(),e.future=[],e.present={slides:n,timestamp:Date.now(),actionType:t.payload.actionType})},undo:e=>{if(0===e.past.length)return;e.isUndoRedoInProgress=!0,e.present&&e.future.unshift(i(e.present));let t=e.past[e.past.length-1];e.past=e.past.slice(0,-1),e.present=i(t)},redo:e=>{if(0===e.future.length)return;e.isUndoRedoInProgress=!0,e.present&&e.past.push(i(e.present));let t=e.future[0];e.future=e.future.slice(1),e.present=i(t)},finishUndoRedo:e=>{e.isUndoRedoInProgress=!1},clearHistory:e=>{e.past=[],e.future=[],e.present=null}}}),{addToHistory:s,undo:r,redo:o,finishUndoRedo:d,clearHistory:u}=l.actions;t.ZP=l.reducer},62025:function(e,t,n){"use strict";n.d(t,{KY:function(){return l},Re:function(){return i}});let a=(0,n(1455).oM)({name:"userConfig",initialState:{llm_config:{},can_change_keys:!1},reducers:{setLLMConfig:(e,t)=>{e.llm_config=t.payload},setCanChangeKeys:(e,t)=>{e.can_change_keys=t.payload}}}),{setLLMConfig:i,setCanChangeKeys:l}=a.actions;t.ZP=a.reducer},82314:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var a=n(1455),i=n(91626),l=n(44763),s=n(62025),r=n(99150);let o=(0,a.xC)({reducer:{presentationGeneration:i.ZP,pptGenUpload:l.ZP,userConfig:s.ZP,undoRedo:r.ZP}})},18351:function(e,t,n){"use strict";n.d(t,{Gi:function(){return a},N6:function(){return r},Zk:function(){return l},wf:function(){return i}});let a=(e,t,n)=>{let a={openai_api_key:"OPENAI_API_KEY",openai_model:"OPENAI_MODEL",google_api_key:"GOOGLE_API_KEY",google_model:"GOOGLE_MODEL",anthropic_api_key:"ANTHROPIC_API_KEY",anthropic_model:"ANTHROPIC_MODEL",ollama_url:"OLLAMA_URL",ollama_model:"OLLAMA_MODEL",custom_llm_url:"CUSTOM_LLM_URL",custom_llm_api_key:"CUSTOM_LLM_API_KEY",custom_model:"CUSTOM_MODEL",pexels_api_key:"PEXELS_API_KEY",pixabay_api_key:"PIXABAY_API_KEY",image_provider:"IMAGE_PROVIDER",use_custom_url:"USE_CUSTOM_URL",tool_calls:"TOOL_CALLS",disable_thinking:"DISABLE_THINKING",extended_reasoning:"EXTENDED_REASONING",web_grounding:"WEB_GROUNDING"}[t];return a?{...e,[a]:n}:e},i=(e,t)=>{let n={...e,LLM:t};return"openai"===t?n.IMAGE_PROVIDER="dall-e-3":"google"===t?n.IMAGE_PROVIDER="gemini_flash":n.IMAGE_PROVIDER="pexels",n},l=async e=>{try{let t=await fetch("/api/v1/ppt/ollama/models/available");return(await t.json()).map(e=>e.name).includes(e)}catch(e){return console.error("Error checking if selected Ollama model is pulled:",e),!1}},s=()=>({name:"",size:null,downloaded:null,status:"",done:!1}),r=async(e,t)=>new Promise((n,a)=>{let i=setInterval(async()=>{try{let l=await fetch("/api/v1/ppt/ollama/model/pull?model=".concat(e));if(200===l.status){let e=await l.json();if(e.done&&"error"!==e.status)clearInterval(i),null==t||t(e),n(e);else if("error"===e.status){clearInterval(i);let e=s();null==t||t(e),a(Error("Error occurred while pulling model"))}else null==t||t(e)}else{clearInterval(i);let e=s();null==t||t(e),403===l.status&&a(Error("Request to Ollama Not Authorized")),a(Error("Error occurred while pulling model"))}}catch(n){clearInterval(i);let e=s();null==t||t(e),a(n)}},1e3)})},93732:function(e,t,n){"use strict";n.d(t,{L:function(){return s},W:function(){return l}});var a=n(62025),i=n(82314);let l=async e=>{if(!s(e))throw Error("Provided configuration is not valid");await fetch("/api/user-config",{method:"POST",body:JSON.stringify(e)}),i.h.dispatch((0,a.Re)(e))},s=e=>{if(!e.LLM||!e.IMAGE_PROVIDER)return!1;let t=""!==e.OPENAI_MODEL&&null!==e.OPENAI_MODEL&&void 0!==e.OPENAI_MODEL&&""!==e.OPENAI_API_KEY&&null!==e.OPENAI_API_KEY&&void 0!==e.OPENAI_API_KEY,n=""!==e.GOOGLE_MODEL&&null!==e.GOOGLE_MODEL&&void 0!==e.GOOGLE_MODEL&&""!==e.GOOGLE_API_KEY&&null!==e.GOOGLE_API_KEY&&void 0!==e.GOOGLE_API_KEY,a=""!==e.ANTHROPIC_MODEL&&null!==e.ANTHROPIC_MODEL&&void 0!==e.ANTHROPIC_MODEL&&""!==e.ANTHROPIC_API_KEY&&null!==e.ANTHROPIC_API_KEY&&void 0!==e.ANTHROPIC_API_KEY,i=""!==e.OLLAMA_MODEL&&null!==e.OLLAMA_MODEL&&void 0!==e.OLLAMA_MODEL&&""!==e.OLLAMA_URL&&null!==e.OLLAMA_URL&&void 0!==e.OLLAMA_URL,l=""!==e.CUSTOM_LLM_URL&&null!==e.CUSTOM_LLM_URL&&void 0!==e.CUSTOM_LLM_URL&&""!==e.CUSTOM_MODEL&&null!==e.CUSTOM_MODEL&&void 0!==e.CUSTOM_MODEL;return("openai"===e.LLM?t:"google"===e.LLM?n:"anthropic"===e.LLM?a:"ollama"===e.LLM?i:"custom"===e.LLM&&l)&&(()=>{switch(e.IMAGE_PROVIDER){case"pexels":return e.PEXELS_API_KEY&&""!==e.PEXELS_API_KEY;case"pixabay":return e.PIXABAY_API_KEY&&""!==e.PIXABAY_API_KEY;case"dall-e-3":return e.OPENAI_API_KEY&&""!==e.OPENAI_API_KEY;case"gemini_flash":return e.GOOGLE_API_KEY&&""!==e.GOOGLE_API_KEY;default:return!1}})()}}},function(e){e.O(0,[3889,1455,2971,2117,1744],function(){return e(e.s=58917)}),_N_E=e.O()}]);